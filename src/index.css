@import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Rotina Pixel Gamer Design System */
@layer base {
  :root {
    /* Pixel Gamer Color Palette */
    --pixel-bg: 208 50% 12%;           /* #1a1a2e */
    --pixel-bg-light: 216 42% 19%;     /* #16213E */
    --pixel-blue: 200 100% 23%;        /* #0F3460 */
    --pixel-red: 351 85% 58%;          /* #E94560 */
    --pixel-text: 0 0% 88%;            /* #e0e0e0 */
    --pixel-cyan: 187 100% 64%;        /* #67e8f9 */
    --pixel-yellow: 45 93% 47%;        /* #eab308 */
    --pixel-green: 120 100% 55%;       /* #39FF14 */
    --pixel-purple: 283 68% 68%;       /* #a855f7 */
    --pixel-gray: 215 13% 34%;         /* #4b5563 */
    --pixel-gray-light: 215 13% 50%;   /* #6b7280 */

    /* Main theme colors */
    --background: var(--pixel-bg);
    --foreground: var(--pixel-text);
    --primary: var(--pixel-blue);
    --primary-foreground: var(--pixel-red);
    --secondary: var(--pixel-bg-light);
    --secondary-foreground: var(--pixel-text);
    --accent: var(--pixel-cyan);
    --accent-foreground: var(--pixel-bg);
    --destructive: var(--pixel-red);
    --destructive-foreground: var(--pixel-text);
    --muted: var(--pixel-gray);
    --muted-foreground: var(--pixel-gray-light);
    --border: 0 0% 0%;
    --input: var(--pixel-bg-light);
    --ring: var(--pixel-red);
    --radius: 0rem;

    /* Card colors */
    --card: var(--pixel-bg-light);
    --card-foreground: var(--pixel-text);
    --popover: var(--pixel-bg-light);
    --popover-foreground: var(--pixel-text);
  }

  body {
    font-family: 'VT323', monospace;
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    background-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="p" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="%230F3460"/></pattern></defs><rect width="100%" height="100%" fill="url(%23p)"/></svg>');
  }

  * {
    border-color: hsl(var(--border));
    image-rendering: pixelated;
  }
}

@layer components {
  .pixel-border {
    border: 4px solid #000;
    border-image-slice: 2;
    border-image-width: 2;
    border-image-repeat: stretch;
    border-image-source: url('data:image/svg+xml;utf8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="6" height="6"><g fill="%23e0e0e0"><path d="M0,2 V4 H2 V6 H4 V4 H6 V2 H4 V0 H2 V2Z"/></g></svg>');
    border-image-outset: 2;
    position: relative;
    background: hsl(var(--pixel-bg-light));
  }

  .pixel-btn {
    @apply px-6 py-2 text-lg uppercase transition-all duration-150;
    background-color: hsl(var(--pixel-blue));
    color: hsl(var(--pixel-red));
    border: 2px solid hsl(var(--pixel-red));
    box-shadow: 4px 4px 0px hsl(var(--pixel-red));
  }

  .pixel-btn:hover {
    @apply -translate-x-1 -translate-y-1;
    box-shadow: 6px 6px 0px hsl(var(--pixel-red));
  }

  .pixel-btn:active {
    @apply translate-x-0 translate-y-0;
    box-shadow: 2px 2px 0px hsl(var(--pixel-red));
  }

  .btn-green {
    background-color: #166534;
    color: #bef264;
    border: 2px solid #bef264;
    box-shadow: 4px 4px 0px #bef264;
    transition: all 0.15s;
    padding: 0.5rem 1rem;
    text-transform: uppercase;
  }

  .btn-green:hover {
    transform: translate(-4px, -4px);
    box-shadow: 6px 6px 0px #bef264;
  }

  .btn-green:active {
    transform: translate(0px, 0px);
    box-shadow: 2px 2px 0px #bef264;
  }

  .item-card {
    display: flex;
    flex-direction: column;
    transition: all 0.2s;
    position: relative;
    background: linear-gradient(145deg, #1f2c4c, #131a2e);
    border: 2px solid #0f3460;
    box-shadow: 0px 4px 0px #0b121f, 0px 6px 8px rgba(0,0,0,0.4);
  }

  .item-card:hover {
    transform: translateY(-4px);
    box-shadow: 0px 6px 0px #0b121f, 0px 8px 12px rgba(0,0,0,0.5);
  }

  .item-card img {
    image-rendering: pixelated;
    border-bottom: 4px solid #0b121f;
  }

  .task-checkbox {
    @apply appearance-none w-10 h-10 bg-gray-700 cursor-pointer transition-all duration-100 flex-shrink-0 relative;
    border: 2px solid #000;
    box-shadow: inset 0 -4px rgba(0,0,0,0.2), 0 4px #0b121f;
    image-rendering: pixelated;
  }

  .task-checkbox:hover {
    @apply bg-gray-600;
  }

  .task-checkbox:active:not(:checked) {
    transform: translateY(2px);
    box-shadow: inset 0 -2px rgba(0,0,0,0.2), 0 2px #0b121f;
  }

  .task-checkbox:checked {
    background-color: #166534;
    border-color: hsl(var(--pixel-green));
    box-shadow: inset 0 4px rgba(0,0,0,0.4);
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%23bef264" stroke-width="4" stroke-linecap="square" stroke-linejoin="arcs"><path d="M20 6 9 17l-5-5"></path></svg>');
    background-size: 80%;
    background-repeat: no-repeat;
    background-position: center;
  }

  .progress-bar-container {
    @apply w-full bg-gray-800 border-2 border-black p-1;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.4);
  }

  .progress-bar {
    @apply h-4 text-center text-black text-sm transition-all duration-500;
    background-color: hsl(var(--pixel-green));
  }

  .quest-card {
    @apply p-4 flex items-center gap-4 transition-all duration-200 relative;
    background: linear-gradient(145deg, #1f2c4c, #131a2e);
    border: 2px solid hsl(var(--pixel-blue));
    border-left: 6px solid hsl(var(--pixel-red));
    box-shadow: 0px 4px 0px #0b121f, 0px 6px 8px rgba(0,0,0,0.4);
  }

  .quest-card:hover {
    @apply transform -translate-y-1;
    box-shadow: 0px 6px 0px #0b121f, 0px 8px 12px rgba(0,0,0,0.5);
  }

  .quest-card.completed {
    background: linear-gradient(145deg, #1a253c, #0d121f);
    border-left-color: hsl(var(--pixel-green));
    opacity: 0.8;
  }

  .quest-card.completed label, 
  .quest-card.completed p {
    text-decoration: line-through;
    color: #9a9a9a;
  }

  .day-btn {
    @apply p-1 md:p-2 text-center cursor-pointer transition-all duration-150 border-2 border-transparent flex items-center justify-center;
    background-color: hsl(var(--pixel-blue));
  }

  .day-btn:hover {
    background-color: hsl(var(--pixel-bg-light));
  }

  .day-btn.today {
    border-color: hsl(var(--pixel-yellow));
    color: hsl(var(--pixel-yellow));
  }

  .day-btn.selected {
    background-color: hsl(var(--pixel-cyan) / 0.8);
    transform: scale(1.05);
    border-color: hsl(var(--pixel-cyan));
  }

  .sparkle-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
  }

  .sparkle {
    position: absolute;
    width: 8px;
    height: 8px;
    background: hsl(var(--pixel-yellow));
    border-radius: 50%;
    animation: sparkle-burst 0.6s ease-out forwards;
  }

  @keyframes sparkle-burst {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(1.5) translate(var(--x), var(--y)); opacity: 0; }
  }

  .animate-pop {
    animation: pop-in 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
  }

  @keyframes pop-in {
    0% { transform: scale(0.5); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
  }

  .fade-in-start {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
  }

  /* Estilos específicos para o painel de configurações */
  .btn-disabled {
    @apply px-6 py-2 text-lg uppercase;
    background-color: #535353;
    color: #9a9a9a;
    border: 2px solid #9a9a9a;
    box-shadow: 4px 4px 0px #9a9a9a;
    cursor: not-allowed;
  }

  /* Estilo para caixas de texto e seletores */
  .nes-input {
    @apply w-full border-4 border-cyan-400 p-2 text-white text-lg focus:outline-none focus:border-yellow-400;
    background-color: rgba(0, 0, 0, 0.4);
    color-scheme: dark;
  }

  /* Estilo para o ícone do calendário em inputs de data (Chrome/Edge) */
  .nes-input::-webkit-calendar-picker-indicator {
    filter: invert(1);
  }

  .nes-select {
    @apply w-full border-4 border-cyan-400 p-2 text-white text-lg focus:outline-none focus:border-yellow-400 appearance-none;
    background-color: rgba(0, 0, 0, 0.4);
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="%2300ffff"><polygon points="0,0 20,0 10,10"/></svg>');
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1em;
    padding-right: 2rem;
  }

  /* Radio button styles */
  .nes-radio {
    @apply appearance-none w-6 h-6 border-4 rounded-full cursor-pointer relative;
    border-color: hsl(var(--pixel-cyan));
    background-color: rgb(31 41 55);
  }

  .nes-radio:checked::after {
    content: '';
    @apply block w-3 h-3 rounded-full absolute;
    background-color: hsl(var(--pixel-yellow));
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }
}